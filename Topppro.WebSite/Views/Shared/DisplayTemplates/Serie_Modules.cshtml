@using Topppro.WebSite.Resources
@using Topppro.WebSite.Extensions
@using Framework.Common.Extensions

@model Topppro.Entities.Serie

@{
    ViewBag.MaxPerLine = 5;
}

@functions {

    void SetColors(int productId)
    {
        switch (productId)
        {
            case 143:
            case 144:
            case 145:
            case 146:
            case 147:
                ViewBag.BackColor = "#344C6E";
                ViewBag.FontClass = "Estilo44";
                break;
            case 148:
            case 149:
                ViewBag.BackColor = "#5E82B3";
                ViewBag.FontClass = "Estilo44";
                break;
            case 150:
                ViewBag.BackColor = "#9BB1D0";
                ViewBag.FontClass = "";
                break;
            case 151:
                ViewBag.BackColor = "#233249";
                ViewBag.FontClass = "Estilo44";
                break;
        }
    }
}

@Html.Separator()

<tr>
    <td width="55">
        &nbsp;
    </td>
    <td colspan="9">
        <img src="@Url.Content("~/Content/Images/modules-series-spacer.png")" alt="@Model.Name.ToUpper() SERIES" width="881" height="43" />
    </td>
    <td width="55">
        &nbsp;
    </td>
</tr>

@Html.Separator()
@Html.Pattern()

@if (!Model.Products.IsEmpty())
{
<tr>
    <td>&nbsp;</td>
    @foreach (var product in Model.Products.Where(p => p.Enabled).OrderBy(p => p.Priority))
    {
        if (Model.Products.Where(p => p.Enabled).OrderBy(p => p.Priority).ToList().IndexOf(product) != 0
            && (Model.Products.Where(p => p.Enabled).OrderBy(p => p.Priority).ToList().IndexOf(product) % ViewBag.MaxPerLine) == 0)
        {
            @:</tr>
            @Html.Separator()
            @:<tr>
                <td>&nbsp;</td>
        }
    
        <td>
            <table cellpadding="0" cellspacing="0" width="100%">
                <tr>
                    <td align="left">
                        @if (product.GetThumbs().IsEmpty())
                        {
                        <img src="@Url.Content("~/Content/Images/coming-soon.jpg")" alt="@product.Name" name="@(string.Format("Image{0}", product.Id))"
                            width="100%" height="148" border="0" id="@(string.Format("Image{0}", product.Id))" />
                        }
                        else
                        {
                            <a href="@Url.Action("Modules_HiRes")" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('@(string.Format("Image{0}", product.Id))','','@(product.GetThumbs().Where(t => t.Contains("up")).DefaultIfEmpty<string>(Url.Content("~/Content/Images/coming-soon.jpg")).First())',1)">
                                <img src="@(product.GetThumbs().Where(t => !t.Contains("up")).DefaultIfEmpty<string>(Url.Content("~/Content/Images/coming-soon.jpg")).First())" alt="@product.Name" name="@(string.Format("Image{0}", product.Id))"
                                    width="100%" height="148" border="0" id="@(string.Format("Image{0}", product.Id))" />
                            </a>
                        }
                    </td>
                </tr>
                <tr>
                    @{ SetColors(product.Id); }
                    <td align="center" height="61" bgcolor="@ViewBag.BackColor" class="@ViewBag.FontClass" style="padding-left:25px;padding-right:25px;">
                        <span class="@ViewBag.FontClass">@product.Name</span>
                    </td>
                </tr>
            </table>
        </td>
        <td>&nbsp;</td>
    }
</tr>

@Html.Separator()

<tr>
    <td height="57">
        <img src="@Url.Content("~/Content/Images/middle1-separator.png")" width="28" height="55">
    </td>
    <td colspan="9" align="center" class="Estilo53">
        <table border="0" cellpadding="0" cellspacing="0">
            <colgroup>
                <col width="917"/>
                <col width="236"/>
                <col width="146"/>
                <col width="80"/>
            </colgroup>
            <tbody>
                <tr height="20">
                    <td height="28" colspan="4" align="center" bgcolor="#F7F7F7">
                        <span class="Estilo57">@Localization.Processors_Index_Tac_Compatibility</span>
                        <span class="Estilo57"></span>
                    </td>
                </tr>
                <tr height="20">
                    <td width="386" height="77" align="center" bgcolor="#344C6E">
                        <span class="Estilo44">TPM 9.1000 / TPM 7.800/ TPM 8250 / TPM 6250 /<br>
                            TPM 4200 / MX 32.4 / MX 1642 / MX 2442 / MX1422FX /<br>
                            MX1222FX / ARK 15A / ARK 12A / KPA 300R</span>
                    </td>
                    <td width="160" align="center" bgcolor="#5E82B3">
                        <span class="Estilo44">MX 32.4 / MX 1642 /<br>
                            MX 2442</span>
                    </td>
                    <td width="160" align="center" bgcolor="#9BB1D0">
                        <span>ARK 15A / ARK 12A</span>
                    </td>
                    <td width="168" align="center" bgcolor="#233249">
                        <span class="Estilo44">KS-CS , i4K series</span>
                    </td>
                </tr>
            </tbody>
        </table>
    </td>
    <td>
        &nbsp;
    </td>
</tr>
}
